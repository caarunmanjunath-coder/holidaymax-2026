<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HolidayMax 2026</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#5E2D79">

<!-- App Icons -->
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #5E2D79, #8E44AD);
    color: white;
    padding: 20px;
}

.header {
    text-align: center;
    margin-bottom: 30px;
}

.logo {
    width: 200px;
    height: 60px;
    object-fit: contain;
    margin-bottom: 10px;
}

h1 {
    margin: 0;
    font-weight: 600;
}

.controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

select {
    padding: 10px 15px;
    border-radius: 30px;
    border: none;
    font-size: 14px;
    outline: none;
}

.card {
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
}

.section-title {
    font-size: 18px;
    margin-bottom: 15px;
    font-weight: 600;
}

.holiday-item {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255,255,255,0.2);
}

.holiday-item:last-child {
    border-bottom: none;
}

.date-big {
    font-size: 18px;
    font-weight: 600;
}

.badge {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.badge-3 { background: #27AE60; }
.badge-4 { background: #2980B9; }
.badge-5 { background: #8E44AD; }

.splash {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:#5E2D79;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:9999;
}

.loader {
    border: 4px solid #ddd;
    border-top: 4px solid white;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
    margin-top: 20px;
}

@keyframes spin {
    100% { transform: rotate(360deg); }
}
</style>
</head>

<body>

<div id="splash" class="splash">
    <img src="logo.png" width="200">
    <div class="loader"></div>
</div>

<div class="header">
    <img src="logo.png" class="logo">
    <h1>HolidayMax 2026</h1>
</div>

<div class="controls">
    <select id="monthSelect"></select>
    <select id="filterSelect">
        <option value="all">All Stretches</option>
        <option value="3">3+ Days</option>
        <option value="4">4+ Days</option>
    </select>
</div>

<div class="card">
    <div class="section-title">Holidays</div>
    <div id="holidayList"></div>
</div>

<div class="card">
    <div class="section-title">Smart Leave Suggestions</div>
    <div id="recommendations"></div>
</div>

<script>
const year = 2026;

const fixedHolidays = {
"2026-01-26":"Republic Day",
"2026-08-15":"Independence Day",
"2026-12-25":"Christmas"
};

let holidaySet = new Set(Object.keys(fixedHolidays));

for(let m=0;m<12;m++){
for(let d=1;d<=31;d++){
let date=new Date(year,m,d);
if(date.getMonth()!==m) continue;
let iso=date.toISOString().split("T")[0];

if(date.getDay()===0) holidaySet.add(iso);
if(date.getDay()===6){
let week=Math.ceil(d/7);
if(week===2||week===4) holidaySet.add(iso);
}
}
}

const monthSelect=document.getElementById("monthSelect");
const filterSelect=document.getElementById("filterSelect");
const holidayDiv=document.getElementById("holidayList");
const recommendDiv=document.getElementById("recommendations");

let selectedMonth=new Date().getMonth();

for(let i=0;i<12;i++){
let option=document.createElement("option");
option.value=i;
option.text=new Date(year,i).toLocaleString('default',{month:'long'});
if(i===selectedMonth) option.selected=true;
monthSelect.appendChild(option);
}

monthSelect.addEventListener("change",()=>{selectedMonth=parseInt(monthSelect.value);render();});
filterSelect.addEventListener("change",render);

function formatDate(date){
return date.toLocaleDateString('en-IN',{day:'numeric',month:'short',weekday:'short'});
}

function render(){
holidayDiv.innerHTML="";
recommendDiv.innerHTML="";

for(let d=1;d<=31;d++){
let date=new Date(year,selectedMonth,d);
if(date.getMonth()!==selectedMonth) continue;
let iso=date.toISOString().split("T")[0];

if(holidaySet.has(iso)){
holidayDiv.innerHTML+=
`<div class="holiday-item">
<div class="date-big">${formatDate(date)}</div>
<div>${fixedHolidays[iso] || "Weekend"}</div>
</div>`;
}
}

generateStretch();
}

function generateStretch(){
let filterValue=filterSelect.value;

for(let m=0;m<12;m++){
for(let d=1;d<=31;d++){
let date=new Date(year,m,d);
if(date.getMonth()!==m) continue;
let iso=date.toISOString().split("T")[0];

if(!holidaySet.has(iso)){
let count=1;
let prev=new Date(date);
prev.setDate(prev.getDate()-1);
while(holidaySet.has(prev.toISOString().split("T")[0])){
count++; prev.setDate(prev.getDate()-1);
}
let next=new Date(date);
next.setDate(next.getDate()+1);
while(holidaySet.has(next.toISOString().split("T")[0])){
count++; next.setDate(next.getDate()+1);
}

if(count>=3){
if(filterValue==="3" && count<3) continue;
if(filterValue==="4" && count<4) continue;

let badgeClass = count>=5?"badge-5":count>=4?"badge-4":"badge-3";

recommendDiv.innerHTML+=
`<div class="holiday-item">
<div>${formatDate(date)}</div>
<div class="badge ${badgeClass}">${count} Days</div>
</div>`;
}
}
}
}
}

render();

window.onload=()=>{
setTimeout(()=>{
document.getElementById("splash").style.display="none";
},1200);
};

if('serviceWorker' in navigator){
navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>