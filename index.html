<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HolidayMax 2026</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#7c3aed">
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<style>
*{box-sizing:border-box}
body{
margin:0;
font-family:'Inter','Segoe UI',sans-serif;
background:#0f0f14;
color:#e4e4e7;
padding:24px;
}
.header{text-align:center;margin-bottom:40px}
.logo{width:200px;height:60px;object-fit:contain;margin-bottom:10px}
h1{
margin:0;
font-weight:600;
background:linear-gradient(90deg,#a855f7,#7c3aed);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}
.controls{
display:flex;
justify-content:center;
gap:16px;
margin-bottom:30px;
flex-wrap:wrap;
}
select{
padding:10px 16px;
border-radius:10px;
border:1px solid #27272f;
background:#1a1a23;
color:#e4e4e7;
font-size:14px;
}
.card{
background:#1a1a23;
border-radius:18px;
padding:22px;
margin-bottom:25px;
border:1px solid #27272f;
}
.section-title{
font-size:14px;
margin-bottom:18px;
font-weight:600;
color:#a855f7;
text-transform:uppercase;
letter-spacing:1px;
}
.holiday-item{
padding:12px 0;
border-bottom:1px solid #27272f;
}
.holiday-item:last-child{border-bottom:none}
.badge{
display:inline-block;
padding:6px 12px;
border-radius:30px;
font-size:12px;
font-weight:600;
margin-top:6px;
}
.badge-3{background:#7c3aed;color:white}
.badge-4{background:#9333ea;color:white}
.badge-5{background:#c084fc;color:#1a1a23}
.small-text{
font-size:12px;
color:#a1a1aa;
margin-top:4px;
}
</style>
</head>

<body>

<div class="header">
<img src="logo.png" class="logo">
<h1>HolidayMax 2026</h1>
</div>

<div class="controls">
<select id="monthSelect"></select>
</div>

<div class="card">
<div class="section-title">Holidays (Selected Month)</div>
<div id="holidayList"></div>
</div>

<div class="card">
<div class="section-title">ðŸ”¥ Best 5 Leave Opportunities (2026)</div>
<div id="recommendations"></div>
</div>

<script>
const year=2026;

const fixedHolidays={
"2026-01-15":"Uttarayana Punyakala, Makara Sankranti",
"2026-01-26":"Republic Day",
"2026-02-15":"Mahashivaratri",
"2026-03-19":"Ugadi Festival",
"2026-03-21":"Khutub-E-Ramzan",
"2026-03-31":"Mahaveera Jayanthi",
"2026-04-01":"Yearly Closing of Bank Accounts",
"2026-04-03":"Good Friday",
"2026-04-14":"Dr. B. R. Ambedkar Jayanthi",
"2026-04-20":"Basava Jayanthi / Akshaya Tritiya",
"2026-05-01":"May Day",
"2026-05-28":"Bakrid",
"2026-06-26":"Last Day of Moharam",
"2026-08-15":"Independence Day",
"2026-08-26":"Eid-Milad",
"2026-09-03":"Kail Muhuruth (Kodagu Only)",
"2026-09-14":"Varasiddhi Vinayaka Vratha",
"2026-10-02":"Gandhi Jayanthi",
"2026-10-10":"Mahalaya Amavasye",
"2026-10-18":"Tula Sankramana (Kodagu Only)",
"2026-10-20":"Mahanavami / Ayudhapooja",
"2026-10-21":"Vijayadashami",
"2026-10-25":"Maharshi Valmiki Jayanthi",
"2026-11-01":"Kannada Rajyothsava",
"2026-11-08":"Naraka Chaturdashi",
"2026-11-10":"Balipadyami / Deepavali",
"2026-11-26":"Huthri Festival (Kodagu Only)",
"2026-11-27":"Kanakadasa Jayanthi",
"2026-12-25":"Christmas"
};

let holidaySet=new Set(Object.keys(fixedHolidays));

/* Add Sundays + 2nd & 4th Saturdays */
for(let m=0;m<12;m++){
for(let d=1;d<=31;d++){
let date=new Date(year,m,d);
if(date.getMonth()!==m)continue;
let iso=date.toISOString().split("T")[0];

if(date.getDay()===0)holidaySet.add(iso);

if(date.getDay()===6){
let week=Math.ceil(d/7);
if(week===2||week===4)holidaySet.add(iso);
}
}
}

const monthSelect=document.getElementById("monthSelect");
const holidayDiv=document.getElementById("holidayList");
const recommendDiv=document.getElementById("recommendations");

let selectedMonth=new Date().getMonth();

for(let i=0;i<12;i++){
let option=document.createElement("option");
option.value=i;
option.text=new Date(year,i).toLocaleString('default',{month:'long'});
if(i===selectedMonth)option.selected=true;
monthSelect.appendChild(option);
}

monthSelect.addEventListener("change",()=>{
selectedMonth=parseInt(monthSelect.value);
render();
});

function formatDate(date){
return date.toLocaleDateString('en-IN',{day:'numeric',month:'short',weekday:'short'});
}

function render(){
holidayDiv.innerHTML="";
recommendDiv.innerHTML="";

/* Show selected month holidays */
for(let d=1;d<=31;d++){
let date=new Date(year,selectedMonth,d);
if(date.getMonth()!==selectedMonth)continue;
let iso=date.toISOString().split("T")[0];

if(holidaySet.has(iso)){
holidayDiv.innerHTML+=
`<div class="holiday-item">
<strong>${formatDate(date)}</strong><br>
<span class="small-text">${fixedHolidays[iso]||"Weekend"}</span>
</div>`;
}
}

generateBestOpportunities();
}

function generateBestOpportunities(){

let suggestions=[];

for(let m=0;m<12;m++){
for(let d=1;d<=31;d++){

let leave1=new Date(year,m,d);
if(leave1.getMonth()!==m)continue;
let iso1=leave1.toISOString().split("T")[0];
if(holidaySet.has(iso1))continue;

/* 1-Day Bridge */
let prev=new Date(leave1);
prev.setDate(prev.getDate()-1);
let next=new Date(leave1);
next.setDate(next.getDate()+1);

if(holidaySet.has(prev.toISOString().split("T")[0]) &&
   holidaySet.has(next.toISOString().split("T")[0])){

let start=new Date(prev);
while(holidaySet.has(start.toISOString().split("T")[0])){
start.setDate(start.getDate()-1);
}
start.setDate(start.getDate()+1);

let end=new Date(next);
while(holidaySet.has(end.toISOString().split("T")[0])){
end.setDate(end.getDate()+1);
}
end.setDate(end.getDate()-1);

if(leave1<start)start=new Date(leave1);
if(leave1>end)end=new Date(leave1);

let total=Math.round((end-start)/(1000*60*60*24))+1;

if(total>=3){
suggestions.push({
leaveDates:[new Date(leave1)],
start:new Date(start),
end:new Date(end),
totalDays:total
});
}
}

/* 2-Day Bridge */
let leave2=new Date(leave1);
leave2.setDate(leave2.getDate()+1);
let iso2=leave2.toISOString().split("T")[0];

if(!holidaySet.has(iso2)){

let prev2=new Date(leave1);
prev2.setDate(prev2.getDate()-1);
let next2=new Date(leave2);
next2.setDate(next2.getDate()+1);

if(holidaySet.has(prev2.toISOString().split("T")[0]) &&
   holidaySet.has(next2.toISOString().split("T")[0])){

let start=new Date(prev2);
while(holidaySet.has(start.toISOString().split("T")[0])){
start.setDate(start.getDate()-1);
}
start.setDate(start.getDate()+1);

let end=new Date(next2);
while(holidaySet.has(end.toISOString().split("T")[0])){
end.setDate(end.getDate()+1);
}
end.setDate(end.getDate()-1);

if(leave1<start)start=new Date(leave1);
if(leave2>end)end=new Date(leave2);

let total=Math.round((end-start)/(1000*60*60*24))+1;

if(total>=4){
suggestions.push({
leaveDates:[new Date(leave1),new Date(leave2)],
start:new Date(start),
end:new Date(end),
totalDays:total
});
}
}
}

}
}

/* Sort by highest stretch */
suggestions.sort((a,b)=>b.totalDays-a.totalDays);

/* Remove overlaps */
let filtered=[];
for(let s of suggestions){
let overlap=false;
for(let f of filtered){
if(!(s.end < f.start || s.start > f.end)){
overlap=true;
break;
}
}
if(!overlap) filtered.push(s);
}

/* Take Best 5 */
filtered=filtered.slice(0,5);

for(let s of filtered){

let badgeClass=s.totalDays>=5?"badge-5":
               s.totalDays>=4?"badge-4":"badge-3";

let leaveText=s.leaveDates.map(d=>formatDate(d)).join(" & ");

recommendDiv.innerHTML+=
`<div class="holiday-item">
<strong>Take Leave: ${leaveText}</strong>
<div class="badge ${badgeClass}">${s.totalDays} Days Stretch</div>
<div class="small-text">
From ${formatDate(s.start)} to ${formatDate(s.end)}
</div>
</div>`;
}

}

render();

if('serviceWorker' in navigator){
navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
